{"version":3,"file":"index-DfO26yvi.js","sources":["../../../app/administration/src/component/structure/entity-detail/entity-detail.html.twig","../../../app/administration/src/component/structure/entity-detail/index.js"],"sourcesContent":["{% block aggro_entity_detail %}\n    <sw-page class=\"aggro-entity-detail\">\n\n        {% block aggro_entity_detail_header %}\n            <template #smart-bar-header>\n                <h2>{{ title }}</h2>\n            </template>\n\n        {% endblock %}\n\n        {% block aggro_entity_detail_actions %}\n            <template #smart-bar-actions>\n\n                {% block aggro_entity_detail_actions_abort %}\n                    <sw-button\n                            v-tooltip.bottom=\"tooltipCancel\"\n                            :disabled=\"entityIsLoading || undefined\"\n                            @click=\"onCancel\"\n                    >\n                        {{ $tc('global.default.cancel') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block aggro_entity_detail_actions_save %}\n                    <sw-button-process\n                            v-if=\"!actions || !actions.length\"\n                            v-model:process-success=\"isSaveSuccessful\"\n                            v-tooltip.bottom=\"tooltipSave\"\n                            class=\"aggro-entity-detail__save-action\"\n                            :is-loading=\"isLoading\"\n                            :disabled=\"isLoading || !acl.can(entity+'.editor') || undefined\"\n                            variant=\"primary\"\n                            @click.prevent=\"onSave\"\n                    >\n                        {{ $tc('aggro.entity-detail.buttonSave') }}\n                    </sw-button-process>\n                {% endblock %}\n\n                {% block aggro_entity_detail_custom_actions %}\n                <sw-button-group v-else class=\"aggro-entity-detail__custom-actions\" :split-button=\"true\">\n                    <sw-button-process\n                            v-model:process-success=\"isSaveSuccessful\"\n                            v-tooltip.bottom=\"tooltipSave\"\n                            class=\"aggro-entity-detail__save-action\"\n                            :is-loading=\"isLoading\"\n                            :disabled=\"isLoading || !acl.can(entity+'.editor') || undefined\"\n                            variant=\"primary\"\n                            @click.prevent=\"onSave\"\n                    >\n                        {{ $tc('aggro.entity-detail.buttonSave') }}\n                    </sw-button-process>\n                    <sw-context-button>\n                        <template #button>\n                            <sw-button\n                                    class=\"aggro-entity-detail__button-context-menu\"\n                                    square\n                                    variant=\"primary\"\n                            >\n                                <sw-icon\n                                        name=\"regular-chevron-down-xs\"\n                                        size=\"16\"\n                                />\n                            </sw-button>\n                        </template>\n\n                        {% block sw_product_detail_actions_save_context_menu_actions %}\n                            {% block sw_product_detail_actions_duplicate %}\n                                <sw-context-menu-item\n                                        v-for=\"action in actions\"\n                                        v-bind=\"action.props\"\n                                        @click=\"action.onClick(editEntity, this)\"\n                                >\n                                    {{ $tc(action.label) }}\n                                </sw-context-menu-item>\n                            {% endblock %}\n                        {% endblock %}\n                    </sw-context-button>\n                </sw-button-group>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        {% block aggro_entity_detail_language_switch %}\n            <template #language-switch>\n                <sw-language-switch\n                        :disabled=\"entityId == null || undefined\"\n                        :save-changes-function=\"saveOnLanguageChange\"\n                        :abort-change-function=\"abortOnLanguageChange\"\n                        @on-change=\"onChangeLanguage\"\n                />\n            </template>\n        {% endblock %}\n\n        {% block aggro_entity_detail_content %}\n            <template #content>\n                <sw-card-view>\n                    <template v-if=\"entityIsLoading\">\n                        <sw-skeleton variant=\"detail-bold\" />\n                        <sw-skeleton />\n                    </template>\n\n                    <template v-else>\n\n                        {% block aggro_entity_detail_content_language_info %}\n                            <sw-language-info\n                                    :entity-description=\"title\"\n                            />\n                        {% endblock %}\n\n                        {% block aggro_entity_detail_content_tabs %}\n                            <sw-tabs\n                                    v-if=\"!isCreateMode\"\n                                    class=\"aggro-entity-detail__tabs\"\n                                    position-identifier=\"aggro-entity-detail-tabs\"\n                                    :default-item=\"formsToRender[0].ident\"\n                            >\n\n                                <template #default=\"{ active }\">\n                                    <sw-tabs-item\n                                            v-for=\"form in formsToRender\"\n                                            :key=\"`tab-item-${form.ident}`\"\n                                            class=\"aggro-entity-detail__tab-item\"\n                                            :name=\"form.ident\"\n                                            :active-tab=\"active\"\n                                    >\n                                        {{ $tc(form.title) }}\n                                    </sw-tabs-item>\n                                </template>\n\n                                <template #content=\"{ active }\">\n                                    <template\n                                            v-for=\"form in formsToRender\"\n                                            :key=\"`tab-${form.ident}`\"\n                                    >\n                                        <div\n                                                v-if=\"active === form.ident\"\n                                                class=\"aggro-entity-detail__tab\"\n                                        >\n                                            <sw-card\n                                                    v-for=\"card in form.cards\"\n                                                    :key=\"`card-${card.ident}`\"\n                                                    class=\"aggro-entity-detail__card\"\n                                                    :class=\"card.grid ? '--has-grid' : ''\"\n                                                    position-identifier=\"`aggro-entity-detail-tab-${card.ident}`\"\n                                                    :title=\"card.title ? $tc(card.title) : ''\"\n                                                    :content-padding=\"card.contentPadding !== false\"\n                                            >\n                                                <template v-if=\"!isLoading\">\n                                                    <div class=\"aggro-entity-detail__grid-toolbar\" v-if=\"!editEntity.isNew() && card.grid\">\n                                                        <sw-container\n                                                                columns=\"1fr 32px minmax(100px, 200px)\"\n                                                                gap=\"0 10px\"\n                                                        >\n                                                            <sw-simple-search-field\n                                                                    v-model:value=\"gridSearchTerm[card.grid.ref]\"\n                                                                    size=\"small\"\n                                                                    variant=\"form\"\n                                                                    @search-term-change=\"onGridSearch(card.grid)\"\n                                                            />\n                                                            <sw-button\n                                                                    square\n                                                                    size=\"small\"\n                                                                    :disabled=\"!gridSelection[card.grid.ref] || gridSelection[card.grid.ref].length === 0\"\n                                                                    class=\"aggro-entity-detail__grid-delete-button\"\n                                                                    @click=\"onDeleteGridEntity(card.grid)\"\n                                                            >\n                                                                <sw-icon\n                                                                        name=\"regular-trash\"\n                                                                        small\n                                                                />\n                                                            </sw-button>\n\n                                                            <sw-container>\n                                                                <sw-button\n                                                                        size=\"small\"\n                                                                        class=\"aggro-entity-detail__grid-add-button\"\n                                                                        @click=\"onAddGridEntity(card.grid)\"\n                                                                >\n                                                                    {{ $tc('aggro.entity-detail.addOption') }}\n                                                                </sw-button>\n                                                            </sw-container>\n                                                        </sw-container>\n                                                    </div>\n                                                    <sw-container :columns=\"card.columns || '1fr'\" gap=\"0px 30px\" v-if=\"card.fields\">\n                                                        <template v-for=\"field in card.fields\" :key=\"field.ref\">\n                                                            <aggro-form-field-renderer\n                                                                :field=\"field\"\n                                                                :edit-entity=\"editEntity\"\n                                                            />\n                                                        </template>\n                                                    </sw-container>\n                                                    <component :is=\"card.component\" v-if=\"card.component\" :edit-entity=\"editEntity\" />\n                                                </template>\n                                                <template #grid v-if=\"card.grid\">\n                                                    <sw-empty-state\n                                                            v-if=\"editEntity.isNew()\"\n                                                            title=\"\"\n                                                            :subline=\"$tc('aggro.entity-detail.optionEmptyStateSubline')\"\n                                                            :absolute=\"false\"\n                                                    >\n                                                        <template #icon>\n                                                            <img\n                                                                    :src=\"assetFilter('/administration/static/img/empty-states/products-empty-state.svg')\"\n                                                                    alt=\"\"\n                                                            >\n                                                        </template>\n                                                    </sw-empty-state>\n                                                    <sw-one-to-many-grid\n                                                            v-else\n                                                            :ref=\"(el) => gridRefs[card.grid.ref] = el\"\n                                                            :is-loading=\"gridLoading[card.grid.ref]\"\n                                                            :collection=\"editEntity[card.grid.ref]\"\n                                                            :data-source=\"editEntity[card.grid.ref]\"\n                                                            :columns=\"card.grid.columns\"\n                                                            :full-page=\"false\"\n                                                            :local-mode=\"editEntity.isNew()\"\n                                                            :allow-inline-edit=\"acl.can(gridEntity(card.grid)+'.editor')\"\n                                                            :sort-by=\"getGridSortBy(card.grid)\"\n                                                            :sort-direction=\"getGridSortDirection(card.grid)\"\n                                                            @selection-change=\"onGridSelectionChanged(card.grid, $event)\"\n                                                    >\n\n                                                        <template #column-name=\"{ item, isInlineEdit }\">\n                                                            <template v-if=\"isInlineEdit\">\n                                                                <sw-text-field\n                                                                        v-model:value=\"item.name\"\n                                                                        size=\"small\"\n                                                                />\n                                                            </template>\n\n                                                            <a\n                                                                    v-else\n                                                                    class=\"aggro-entity-detail__grid-detail-link\"\n                                                                    role=\"button\"\n                                                                    tabindex=\"0\"\n                                                                    @click=\"onEditGridEntity(card.grid,item)\"\n                                                                    @keydown.enter=\"onEditGridEntity(card.grid,item)\"\n                                                            >\n                                                                {{ item.translated.name }}\n                                                            </a>\n                                                        </template>\n\n                                                        <template\n                                                                v-for=\"(renderer, column) in gridColumnRenderers(card.grid)\"\n                                                                #[`column-${column}`]=\"{ item }\"\n                                                        >\n                                                            {{ renderer(item) }}\n                                                        </template>\n\n                                                        <template #more-actions=\"{ item }\">\n                                                            <sw-context-menu-item\n                                                                    class=\"aggro-entity-detail__grid-edit-action\"\n                                                                    :disabled=\"!acl.can(gridEntity(card.grid)+'.editor')\"\n                                                                    @click=\"onEditGridEntity(card.grid,item)\"\n                                                            >\n                                                                {{ $tc('aggro.entity-detail.contextMenuView') }}\n                                                            </sw-context-menu-item>\n                                                        </template>\n\n                                                        <template #delete-action=\"{ item }\">\n                                                            <sw-context-menu-item\n                                                                    variant=\"danger\"\n                                                                    :disabled=\"!acl.can(gridEntity(card.grid)+'.editor')\"\n                                                                    @click=\"onDeleteSingleGridEntity(card.grid,item.id)\"\n                                                            >\n                                                                {{ $tc('aggro.entity-detail.contextMenuDelete') }}\n                                                            </sw-context-menu-item>\n                                                        </template>\n                                                    </sw-one-to-many-grid>\n                                                    <sw-modal\n                                                        :title=\"gridEditEntity?.name ? gridEditEntity.name : $tc('aggro.entity-detail.editGridHeadline')\"\n                                                        @modal-close=\"onCancelEditGridEntity\"\n                                                        v-if=\"editedGrid?.ref === card.grid.ref && gridEditEntity\"\n                                                    >\n                                                        <sw-container columns=\"1fr\" gap=\"0px 30px\">\n                                                            <template v-for=\"gridField in card.grid.fields\" :key=\"gridField.ref\">\n                                                                <aggro-form-field-renderer\n                                                                        :field=\"gridField\"\n                                                                        :edit-entity=\"editEntity\"\n                                                                        :grid-edit-entity=\"gridEditEntity\"\n                                                                />\n                                                            </template>\n                                                        </sw-container>\n                                                        <template #modal-footer>\n                                                                <sw-button\n                                                                        size=\"small\"\n                                                                        @click=\"onCancelEditGridEntity\"\n                                                                >\n                                                                    {{ $tc('global.default.cancel') }}\n                                                                </sw-button>\n                                                                <sw-button\n                                                                        variant=\"primary\"\n                                                                        size=\"small\"\n                                                                        @click=\"onSaveGridEntity\"\n                                                                >\n                                                                    {{ $tc('global.default.apply') }}\n                                                                </sw-button>\n                                                        </template>\n                                                    </sw-modal>\n                                                </template>\n                                            </sw-card>\n                                        </div>\n                                    </template>\n                                </template>\n                            </sw-tabs>\n                        {% endblock %}\n\n                        {% block aggro_entity_detail_custom_field_sets %}\n                            <sw-card\n                                    v-if=\"customFieldSets.length > 0\"\n                                    position-identifier=\"aggro-entity-detail-custom-field-sets\"\n                                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                                    :is-loading=\"entityIsLoading\"\n                            >\n                                <sw-custom-field-set-renderer\n                                        v-if=\"editEntity\"\n                                        :entity=\"editEntity\"\n                                        :sets=\"customFieldSets\"\n                                        :disabled=\"!acl.can(entity+'.editor') || undefined\"\n                                />\n                            </sw-card>\n                        {% endblock %}\n\n                        {% block aggro_entity_detail_modals %}\n                            <template v-for=\"modal in modals\">\n                                <component\n                                        v-if=\"modalIsOpen(modal.ident)\"\n                                        v-bind=\"modal.props\"\n                                        :is=\"modal.component\"\n                                        :edit-entity=\"editEntity\"\n                                        @modal-close=\"closeModal(modal.ident)\"\n                                />\n                            </template>\n                        {% endblock %}\n                    </template>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n\n        {% block aggro_entity_detail_sidebar %}\n            <template #sidebar>\n                <sw-sidebar :propagate-width=\"true\">\n                    <sw-sidebar-media-item\n                            ref=\"mediaSidebarItem\"\n                            :disabled=\"!acl.can(entity+'.editor') || undefined\"\n                    >\n                        <template\n                                #context-menu-items=\"media\"\n                        >\n                            <sw-context-menu-item @click=\"setMediaFromSidebar(media.mediaItem)\">\n                                {{ $tc('aggro.entity-detail.labelUseAsLogo') }}\n                            </sw-context-menu-item>\n                        </template>\n                    </sw-sidebar-media-item>\n                </sw-sidebar>\n            </template>\n        {% endblock %}\n\n    </sw-page>\n{% endblock %}","import template from './entity-detail.html.twig';\nimport './entity-detail.scss';\n\nconst {\n    Mixin,\n    State,\n    Data: { Criteria },\n} = Shopware;\n\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('discard-detail-page-changes')('entity'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        entityId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        entity: String,\n        actions: Object,\n        modals: Object,\n        labels: Object,\n        links: Object,\n        forms: Object,\n        context: Object,\n        titleProperty: {\n            type: String,\n            required: false,\n            default: 'name'\n        }\n    },\n\n    data() {\n        return {\n            editEntity: null,\n            customFieldSets: [],\n            isLoading: false,\n            isSaveSuccessful: false,\n            openModals: {},\n            gridSelection: {},\n            gridSortDirection: {},\n            gridSortBy: {},\n            gridSearchTerm: {},\n            gridLoading: {},\n            gridEditEntity: null,\n            editedGrid: null,\n            gridRefs: {},\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.title),\n        };\n    },\n\n    computed: {\n        isSystemLanguage() {\n            return State.get('context').api.systemLanguageId === this.currentLanguage;\n        },\n\n        currentLanguage() {\n            return State.get('context').api.languageId;\n        },\n        title() {\n            if (!this.editEntity) {\n                return this.$tc('aggro.entity-detail.textHeadline');\n            }\n            const title = this.titleProperty.split('.').reduce((a, b) => a[b], this.editEntity)\n            return title || this.$tc('aggro.entity-detail.textHeadline');\n        },\n\n        entityIsLoading() {\n            return this.isLoading || this.editEntity == null;\n        },\n\n        entityRepository() {\n            return this.repositoryFactory.create(this.entity);\n        },\n\n        entityCriteria() {\n            const criteria = new Criteria();\n            criteria.addFilter(Criteria.equals('id', this.entityId));\n            for(const association of this.associationFormFields){\n                criteria.addAssociation(association);\n            }\n            return criteria;\n        },\n\n        associationFormFields() {\n            const definition = Shopware.EntityDefinition.get(this.entity);\n            const associations = [];\n            for(const form of this.forms) {\n                for(const card of form.cards) {\n                    if(card.grid) {\n                        associations.push(card.grid.ref);\n                        if (card.grid.associations) {\n                            for(const fieldAssociation of card.grid.associations){\n                                associations.push(card.grid.ref + '.' + fieldAssociation);\n                            }\n                        }\n                    }else if(card.fields){\n                        for(const field of card.fields){\n                            const prop = definition.properties[field.ref];\n\n                            if (prop && prop.type === 'association' && prop.relation === 'many_to_many'){\n                                associations.push(field.ref);\n                                if (field.associations) {\n                                    for(const fieldAssociation of field.associations){\n                                        associations.push(field.ref + '.' + fieldAssociation);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                for(const association of form.associations || []) {\n                    associations.push(association);\n                }\n            }\n\n            return associations;\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria(1, null);\n            criteria.addFilter(Criteria.equals('relations.entityName', this.entity));\n\n            return criteria;\n        },\n\n        mediaUploadTag() {\n            return `aggro-entity-detail--${this.editEntity.id}`;\n        },\n\n        tooltipSave() {\n            if (this.acl.can(this.entity+'.editor')) {\n                const systemKey = this.$device.getSystemKey();\n\n                return {\n                    message: `${systemKey} + S`,\n                    appearance: 'light',\n                };\n            }\n\n            return {\n                showDelay: 300,\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                disabled: this.acl.can(this.entity+'.editor'),\n                showOnDisabledElements: true,\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n        formsToRender() {\n            return this.forms.filter(form => this.formConditionMet(form));\n        }\n    },\n\n    watch: {\n        entityId() {\n            this.createdComponent();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (this.entityId) {\n                this.loadEntityData();\n                return;\n            }\n\n            Shopware.State.commit('context/resetLanguageToDefault');\n            this.editEntity = this.entityRepository.create();\n        },\n\n        async loadEntityData() {\n            this.isLoading = true;\n\n            const [\n                entityResponse,\n                customFieldResponse,\n            ] = await Promise.allSettled([\n                this.entityRepository.search(this.entityCriteria, { ...( this.context || Shopware.Context.api ), inheritance: true }),\n                this.customFieldSetRepository.search(this.customFieldSetCriteria, this.context || Shopware.Context.api),\n            ]);\n\n            if (entityResponse.status === 'fulfilled') {\n                this.editEntity = entityResponse.value.first();\n            }\n\n            if (customFieldResponse.status === 'fulfilled') {\n                this.customFieldSets = customFieldResponse.value;\n            }\n\n            if (entityResponse.status === 'rejected' || customFieldResponse.status === 'rejected') {\n                this.createNotificationError({\n                    message: this.$tc('global.notification.notificationLoadingDataErrorMessage'),\n                });\n            }\n\n            this.isLoading = false;\n        },\n\n        abortOnLanguageChange() {\n            return this.entityRepository.hasChanges(this.editEntity);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        setMediaItem({ targetId }) {\n            this.editEntity.mediaId = targetId;\n        },\n\n        setMediaFromSidebar(media) {\n            this.editEntity.mediaId = media.id;\n        },\n\n        onUnlinkLogo() {\n            this.editEntity.mediaId = null;\n        },\n\n        openMediaSidebar() {\n            this.$refs.mediaSidebarItem.openContent();\n        },\n\n        onDropMedia(dragData) {\n            this.setMediaItem({ targetId: dragData.id });\n        },\n\n        formConditionMet(form) {\n            if (!form.condition) {\n                return true;\n            }\n\n            return form.condition.call(this, this.editEntity);\n        },\n\n        onSave() {\n            if (!this.acl.can(this.entity+'.editor')) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            this.entityRepository\n                .save(this.editEntity, this.context || Shopware.Context.api)\n                .then(() => {\n                    this.isLoading = false;\n                    this.isSaveSuccessful = true;\n                    if (this.entityId === null) {\n                        this.$router.push({\n                            name: this.links.detail,\n                            params: { id: this.editEntity.id },\n                        });\n                        return;\n                    }\n\n                    this.loadEntityData();\n                })\n                .catch((exception) => {\n                    this.isLoading = false;\n                    this.createNotificationError({\n                        message: this.$tc('global.notification.notificationSaveErrorMessageRequiredFieldsInvalid'),\n                    });\n                    throw exception;\n                });\n        },\n\n        onCancel() {\n            this.$router.push({ name: this.links.list });\n        },\n\n        translatedConfig(config) {\n            if (!config) {\n                return null;\n            }\n            return Object.assign({}, config, {\n                label: config.label ? this.$tc(config.label) : null,\n                placeholder: config.placeholder ? this.$tc(config.placeholder) : null,\n                helpText: config.helpText ? this.$tc(config.helpText) : null,\n                options: config.options ? config.options.map(option => {\n                    return {\n                        ...option,\n                        label: this.$tc(option.label),\n                    }\n                }) : null,\n            })\n        },\n\n        gridPropertyDefinition(grid) {\n            const definition = Shopware.EntityDefinition.get(this.entity);\n            return definition.properties[grid.ref];\n        },\n\n        gridEntity(grid) {\n            const prop = this.gridPropertyDefinition(grid);\n            return prop?.entity;\n        },\n\n        gridRepository(grid) {\n            return this.repositoryFactory.create(this.gridEntity(grid));\n        },\n\n        gridColumnRenderers(grid) {\n            const renderers = {};\n            for (const column of grid.columns) {\n                if (column.renderer) {\n                    renderers[column.property] = column.renderer;\n                }\n            }\n            return renderers;\n        },\n\n        getGridSortBy(grid) {\n            return this.gridSortBy[grid.ref] || 'name';\n        },\n\n        getGridSortDirection(grid) {\n            return this.gridSortDirection[grid.ref] || 'ASC';\n        },\n\n        onGridSearch(grid) {\n            this.editEntity[grid.ref].criteria.setTerm(this.gridSearchTerm[grid.ref]);\n            this.refreshGrid(grid);\n        },\n\n        onGridSelectionChanged(grid, selection) {\n            this.gridSelection[grid.ref] = selection && Object.values(selection).length ? selection : null;\n        },\n\n        onAddGridEntity(grid){\n            if (!this.isSystemLanguage) {\n                return false;\n            }\n\n\n            this.gridEditEntity = this.gridRepository(grid).create();\n\n            const prop = this.gridPropertyDefinition(grid);\n            this.gridEditEntity[prop.referenceField] = this.editEntity.id;\n\n            this.editedGrid = grid;\n\n            return true;\n        },\n\n        async onDeleteGridEntity(grid){\n\n            const selection = this.gridSelection[grid.ref];\n            const entities = Object.values(selection);\n\n            if (this.editEntity.isNew()) {\n                for(const entity of entities){\n                    this.editEntity[grid.ref].remove(entity.id);\n                }\n            }else{\n                for(const entity of entities){\n                    await this.gridRepository(grid).delete(entity.id);\n                }\n            }\n\n            this.refreshGrid(grid);\n        },\n\n        async onDeleteSingleGridEntity(grid, id){\n            await this.gridRepository(grid).delete(id);\n            this.refreshGrid(grid);\n        },\n\n        onEditGridEntity(grid,entity){\n            this.gridEditEntity = entity;\n            this.editedGrid = grid;\n        },\n\n        onCancelEditGridEntity(){\n            this.gridEditEntity = this.editedGrid = null;\n        },\n\n        onSaveGridEntity(){\n            const property = this.editedGrid.ref;\n            if (this.editEntity.isNew()) {\n                console.log('local new', this.gridEditEntity)\n                if (!this.editEntity[property].has(this.gridEditEntity.id)) {\n                    this.editEntity[property].add(this.gridEditEntity);\n                }\n                this.gridEditEntity = this.editedGrid = null;\n            }else{\n                this.gridRepository(this.editedGrid).save(this.gridEditEntity).then(() => {\n                    this.refreshGrid(this.editedGrid);\n                    this.gridEditEntity = this.editedGrid = null;\n                });\n            }\n\n        },\n\n        refreshGrid(grid) {\n\n            this.gridLoading[grid.ref] = true;\n            this.gridRefs[grid.ref].resetSelection();\n            this.gridRefs[grid.ref].load().then(() => {\n                this.gridLoading[grid.ref] = false;\n            });\n            /*\n            //this.isLoading = true;\n\n            this.$refs[grid.ref].load().then(() => {\n                this.isLoading = false;\n            });\n             */\n        },\n\n        modalIsOpen(ident) {\n            return this.openModals[ident] === true;\n        },\n\n        openModal(ident) {\n            this.$set(this.openModals, ident, true);\n            console.log('openModal', ident, this.openModals);\n        },\n\n        closeModal(ident) {\n            this.$set(this.openModals, ident, false);\n            console.log('closeModal', ident, this.openModals);\n        }\n    },\n};"],"names":["template","Mixin","State","Criteria","mapPropertyErrors","index","a","b","criteria","association","definition","associations","form","card","fieldAssociation","field","prop","entityResponse","customFieldResponse","targetId","media","dragData","exception","config","option","grid","renderers","column","selection","entities","entity","id","property","ident"],"mappings":"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"}